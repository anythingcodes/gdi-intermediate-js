<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>JavaScript 201: Intermediate JavaScript</title>

		<meta name="description" content="Girl Develop It framework for easily creating beautiful presentations using HTML in GDI theme. Forked from Hakim El Hattab's reveal.js">
		<meta name="author" content="Girl Develop It">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link rel="stylesheet" href="dist/css/reveal.css">
		<link rel="stylesheet" href="dist/css/gdidarkblue.css" id="theme">

		<!-- For syntax highlighting -->
		<!-- light editor --><link rel="stylesheet" href="dist/css/light.css">
		<!-- dark editor <link rel="stylesheet" href="dist/css/dark.css">-->
		<!-- <link rel="stylesheet" href="dist/css/zenburn.css"> -->

		<link rel="stylesheet" href="plugin/accessibility-helper/css/accessibility-helper.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'dist/css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!-- If use the PDF print sheet so students can print slides-->

		<link rel="stylesheet" href="dist/css/print/pdf.css" type="text/css" media="print">
		<link rel="icon" type="image/x-icon" href="favicon.ico" />
		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
<!-- 
                <section data-markdown>
                    <script type="text/template">
                    
                    </script>
                </section>
 -->
        <!-- Opening -->
                <section>
					<h1>Intermediate JavaScript</h1>
                    <!-- <img src="dist/img/circle-gdi-logo.png" alt="GDI Logo"/> -->
					<h3>Girl Develop It Philly</h3>
					<p><a href="http://gdiphilly.github.io/Intermediate-JS" target="_blank">http://gdiphilly.github.io/Intermediate-JS</a></p>
                    <p><a href="http://codepen.io/collection/DjOMpW/" target="_blank">CodePen exercises</a></p>
				</section>
				
                <section data-markdown id="toc">
                    <script type="text/template">
                        ## Class 2 topics
                        
                        * [jQuery](#/jquery)
                        * [Promises](#/promises)
                        * [Object-oriented programming with JavaScript](#/oojs)
                        * [Form Validation with HTML5 and JavaScript](#/form-validation)
                        * [Test-Driven Development](#/tdd)

                    </script>
                </section>

                <section>
                    <h4>Setup</h4>
                    <ul>
                        <li><a href="#/setup">Download and setup today's exercise files</a></li>
                        <li><a href="class1.html/#/server">Set up a local dev server</a></li>
                    </ul>
                </section>

                <!-- jQuery -->

                <section id="jquery" data-markdown>
                    <script type="text/template">
                        ## jQuery
                        
                        What we'll cover:

                        * DOM manipulation
                        * Ajax
                        * Promises
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    <h3>Remember our AJAX code?</h3>

```javascript
function onSuccess(response) {
    var responseObj = response && JSON.parse(response);
    console.log(responseObj && responseObj.name);
};

var xhr = new XMLHttpRequest();
xhr.open('GET', 'http://jsonplaceholder.typicode.com/users/2/');
xhr.send(null);
xhr.onreadystatechange = function () {
    if (xhr.readyState === 4) {
        if (xhr.status === 200) {
            onSuccess(xhr.responseText);
        } else {
            console.log('Error: ' + xhr.status);
        }
    }
};
```                    

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    <h3>And adding content to the DOM?</h3>
                    <p class="left-align">First, create your new element:</p>

```javascript
var newParagraph = document.createElement('p');
```
                    <p class="left-align">Then, create text to go inside it:</p>

```javascript
var paragraphText = document.createTextNode('Hello World!');
```
                    <p class="left-align"><em>Then</em>, append the text to the new element:</p>
```javascript
newParagraph.appendChild(paragraphText);
```
                    <p class="left-align">Finally, append the whole thing to an existing element on the page!</p>
```javascript
var pageNode = document.getElementById('content');
pageNode.appendChild(newParagraph);
```
                    </script>
                </section>



                <section>
                    <!-- <script type="text/template"> -->
                    <h3>Add content to the DOM with jQuery</h3>
                    <p class="left-align">With jQuery, you can perform the same task with this simpler code:</p>

<pre><code contenteditable class="javascript">$('#content').append('<p>Hello World!</p>');
</code></pre>

                    <p class="left-align">For this to work, you need to include the jQuery library in your index.html page, at the bottom, before script.js:</p>
                    
<pre><code contenteditable class="html"><script
src="https://code.jquery.com/jquery-3.2.1.min.js"
integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
crossorigin="anonymous"></script>
</code></pre>


                    <!-- </script> -->
                </section>


                <section data-markdown>
                    <script type="text/template">
                    <h3>Let's Develop It!</h3>

1. Uncomment lines 9-12 to of index.html to add the jQuery library to your page.
2. Update your AJAX `onSuccess()` function so that it adds the <strong>name</strong> from the JSON response to the page as a new paragraph using jQuery.

```javascript
function onSuccess(response) {
    var responseObj = response && JSON.parse(response);
    var user = responseObj.name;
    $('#content').append('<p>' + user + '</p>');
}
```

                    </script>
                </section>

                <section data-markdown id="promises">
                    <script type="text/template">
                    ### Promises

                    A <a href="https://promisesaplus.com/">promise</a> "represents the eventual result of an asynchronous operation."

                    Tells the browser: <em>when this thing has happened, do this other thing</em>.

                    You can combine promises so that when <em>lots</em> of things have happened, you can then do another thing.

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    ### Promise object
<p class="left-align">What does a promise look like?</p>

- A promise is an object
- It's the result returned by an async function, such as `ajax()`
- It has a `.then()` method 

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    ### Promise state

<p class="left-align">A promise has 3 methods describing the state of the operation:</p>

1. Resolved (operation finished successfully)
2. Rejected (operation finished with an error)
3. Pending (operation still in progress)
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    ### Promises in ES6

<p class="left-align">Promises are part of the ES6 specification, which means they are super new and not supported by many browsers</p>
<p class="left-align">Promises can be used in your applications by including <a href="https://promisesaplus.com/implementations">libraries or polyfills</a></p>


                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    ### jQuery promises

<p class="left-align">The jQuery `ajax()` method returns a promise object with the following methods:</p>

1.  `.done()` Resolved (operation finished successfully)
2.  `.fail()` Rejected (operation finished with an error)

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    <h3>jQuery `ajax()`</h3>

To use the `done()` and `fail()` methods, we *chain* them directly after the ajax method call.

The code we want to attach to each method is inside a function.

```javascript
$.ajax({
    url: jsonUrl
})
.done(function(data) {
    // do something if AJAX call succeeds
})
.fail(function() {
    // do something if it fails
});
```
                    </script>
                </section>

                


                <section data-markdown>
                    <script type="text/template">
                    <h3>Let's Develop It!</h3>
<p class="left-align">Use the jQuery `ajax()` function to make a new AJAX request. </p>

<p class="left-align">**We specify the dataType as `jsonp` here, since the API does not allow CORS. [More info here](class1.html#/cors)**</p>

```javascript
$.ajax({
    url: 'https://my-json-server.typicode.com/cfarm/gdi-js-data/users/10',
    dataType: 'jsonp'
})
.done(function(data) {
    console.log(data);
    getUsername(data);
})
.fail(function(jqXHR, textStatus) {
    console.error('Error:' + textStatus);
});
```

<p class="blue">[This exercise continues on the next slide]</p>

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    <h3>Let's Develop It!</h3>

<p class="left-align">Write a new `getUsername` function to get the `username` property from the response data and add it to the page with jQuery.</p>
<p class="left-align">The new function should also get the `id` property from the response data, and use it to output an id on the paragraph element.</p>
```javascript
function getUsername(response) {
    var user = response.username;
    var userId = response.id;
    $('#content').append('<p id=user-' + userId + '>' + user + '</p>');
};
```
                    </script>
                </section>


                <section data-markdown>
                    <script type="text/template">
                    <h3>Combining promises</h3>
You can combine promises so that you can make multiple things happen when your AJAX request is finished:

```javascript
// save our AJAX request as variable
var getData = $.ajax({
    url: 'https://my-json-server.typicode.com/cfarm/gdi-js-data/users/10',
    dataType: 'jsonp'
})
.done(function() { 
    // do stuff if successful here...
})
.fail(function() { 
    // do stuff if it fails here...
});

// then we can add to it later
getData.always(function() {
    console.log('Piggyback off the original request, even if it fails');   
});
getData.done(function() {
    console.log('AJAX request was a success'); 
});
```
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    ### Let's Develop It!

1. Save your existing jQuery `ajax()` request as a variable, `getData`.
2. Write a function that will get the latitude and longitute from the response data, and output it to the console.
3. Call this function when the response is done.

```javascript
// save our AJAX request as variable
var getData = $.ajax( /* existing code we already wrote.*/ );

// get the lat and long
function getLocation(response) {
    var location = response.address.geo;
    return location;
}

// log the lat and long when getData succeeds
getData.done(function(data) {
    var locationData = getLocation(data);
    console.log(locationData);
});
```
                    </script>
                </section>



                <section data-markdown>
                    <script type="text/template">
                    ### Why add a new promise?

Why not get the location data at the same time that we get the username?

We can do that, but by breaking these into separate functions, our code is more reusable and decoupled.

Just like we try to keep our HTML, CSS, and JavaScript separate from each other to make them all easier to maintain, we do the same with our JS functions.

Plus, we can add a listener to a promise even when it has already been resolved. Even if the promise completed before our code comes along, we can still piggyback off that promise being done and fire our code immediately.
                    </script>
                </section>


                <section data-markdown>
                    <script type="text/template">
                    ### Adding a  promise to our geolocation function

We can go back to our existing code, and add a promise there that will do something when our AJAX code has succeeded *and* our geolocation has been captured by the browser.

What can we make that uses our browser's geolocation coordinates, and our AJAX request's latitude and longitude data?
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    ### Let's make a map

We can make a function that adds Google Map links and Directions to our user information on the page.

First, we need a helper function that will grab the user id from the response data, so we can target the specific paragraph element tied to our user:

```javascript
function getUserId(response) {
    return response.id;
}
```
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    ### Let's make a map

This function will add a link to our page that will take us to the user's location on Google Maps.

We will call the function by using a promise on the AJAX request, `getData`.

```javascript
function createMapLink(response) {
    var latitude = getLocation(response).lat;
    var longitude = getLocation(response).lng;
    var userId = getUserId(response);
    var mapLink = 'https://www.google.com/maps/?q=' + latitude + ',' + longitude;

    $('#user-' + userId).append(' <a href="' + mapLink + '">lives here</a>.');
}

// call createMapLink with the response data when the AJAX request succeeds
getData.done(function(data) {
    createMapLink(data);
});
```
                    </script>
                </section>


                <section data-markdown>
                    <script type="text/template">
                    ### Let's Develop It!
 Add a promise to get directions when the geolocation coordinates are retrieved.

 Go back to your `onGeoComplete()` function, and find the best place to get our geolocation coordinates for use in our directions.

Add the following code there:

```javascript
getData.done(function(data) {
    console.log(data, ' from geolocation');
    createDirections(data, coordsObj);
});
```
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    ### Let's Develop It!

To create the link to Google Maps, add a `createDirections()` function:

```javascript
function createDirections(origin, destination) {
    // get coordinates from the browser geolocation
    var localLat = origin.latitude;
    var localLong = origin.longitude;
    
    // get coordinates from the AJAX request
    var userLat = getLocation(destination).lat;
    var userLong = getLocation(destination).lng;

    // create directions link w/coordinates
    var directionsLink = 'https://www.google.com/maps/?saddr=' + localLat + ',' + localLong + '&z=16&daddr=' + userLat + ',' + userLong;

    console.log(origin);

    // add directions link to the correct element matching the user id
    var userId = getUserId(destination);
    $('#user-' + userId).append(' <a href="' + directionsLink + '">Get directions to go visit</a>.');
}
```
                    </script>
                </section>

                <!-- Object-oriented -->

                <section id="oojs" data-markdown>
                    <script type="text/template">
                        ## Object-oriented JavaScript
                        
                        What we'll cover:
                        
                        * What is an object?
                        * What are attributes and methods?
                        * What is class-based inheritance?
                        * What is prototype-based inheritance?
                        * How do we create objects using inheritance in JavaScript?
                        * How can we extend a prototype in JavaScript?
                    </script>
                </section>

                <!-- <section data-markdown>
                    <script type="text/template">
                        ### Warm up exercise

                        #### Goal: Understanding objects

                        1. Create an object representing a product sold at an online pet store (using the [Codepen](http://codepen.io/pen/) website). For example, you could make a "petProduct" object with the properties "name," "category" and "price."

                        2. Use the push() method to add your product to an array that contains all the products in your online pet store.

                        3. Display your product on the page using [jQuery DOM manipulation](http://api.jquery.com/category/manipulation/) or native [JavaScript DOM insertion methods](https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement).
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ### Warm up exercise

                        ### Goal: Understanding events and 'this'

                        1. In HTML, create a link to the website of your choice on your index.html page. 
                        2. Using a JavaScript "click" event, make clicking on the link alert the link’s "href". 
                        **Hint:** never used the "onclick" event before, and not sure how to use it? Check out MDN for <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onclick">some documentation and examples</a>
                    </script>
                </section> -->

                <section data-markdown>
                    <script type="text/template">
                        ### What is an object? 

                        An object can be a variable, function, or data structure.

```javascript
var petProduct = {
    name: 'Catnip',
    category: 'Plants that cats like',
    buy: function() {
        // Code that adds product to shopping cart
    },
    price: 5
};
```
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ### Uses for object-oriented programming

                        * Model physical concepts more clearly in your code
                        * Make your code easier to read
                        * Create code that is more easily maintainable and reusable
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
### Attributes and methods 

```javascript
var petProduct = {
    name: 'Catnip', // attribute
    category: 'Plants that cats like', // attribute
    buy: function() { // method
        // Code that adds product to shopping cart
    },
    price: 5 // attribute
};
```

When we talk about objects, we're interested in two main concepts:

* Attributes: object characteristics (aka properties)
* Methods: object functions
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ### Group exercise: Shapes
Think about these geometric shapes:

**circle, square, rectangle, star, rhombus, triangle**

* What are some attributes shared by all shapes?
* What are some methods that can be applied to all shapes?
* Are there any attributes or methods that are unique to only one shape? ... to some shapes?

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ### Class-based inheritance
Imagine going shopping for a cat toy.

You go to the pet store with a vague idea of the need for a toy for your cat.
In the cat toy section, you pick out a green felt mouse because you like the color and the price.
In object-oriented terms, we say that you have purchased an instance of the class of objects known as cat toys.

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ### Prototypal inheritance
Let's imagine another way of shopping for cat toys.

You go to the pet store knowing that your cat needs a new toy, because she destroyed the ones she has.
You decide you will buy her another fishing-pole toy, since you can entertain your cat with one hand while you play games on your phone with the other.
You bring her old, broken toy to the store with you, and look for a replacement of the same type.
In object-oriented terms, we say that you have purchased an instance of a cat toy based off of a prototype, from which it inherited some attributes and methods.

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ### Class vs prototypal inheritance

[More on the question, "What’s the Difference Between Class & Prototypal Inheritance?"](https://medium.com/javascript-scene/master-the-javascript-interview-what-s-the-difference-between-class-prototypal-inheritance-e4cd0a7562e9)


                    </script>
                </section>


                <section data-markdown>
                    <script type="text/template">
                        ### Creating new objects

In JavaScript, we use a constructor function to initialize new objects, and we use the **new** keyword to call the constructor.

```javascript
// Create a constructor function for new products
function PetProduct() {
    // Set attributes of all new products
    this.category = 'Pets';
}

var kittenProduct = new PetProduct(); // instantiate new object based on prototype

// kittenProduct can access properties we defined in PetProduct
console.log(kittenProduct.category);    // 'Pets'
```
                    </script>

                    <aside class="notes" data-markdown>
                            For creating lots of PetProduct objects more easily
                            Note the use of "this" keyword: 
                            "The keyword this, which refers to the current object, lets you work with properties from within the class." - [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Introduction_to_Object-Oriented_JavaScript)
                    </aside>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ### Adding Arguments

```javascript
// Create a constructor function for new products
function PetProduct(name, price) {
    // Set the given attributes of this object
    this.name = name;
    this.price = price;

    // Set attributes of all new products, independent of arguments
    this.category = 'Pets';
}

var kittenProduct = new PetProduct('Catnip', 5);

// kittenProduct can access properties we defined in PetProduct
console.log(kittenProduct.category);    // 'Pets'
console.log(kittenProduct.name);        // 'Catnip'
```

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ### Extending the prototype
The prototype property of an object is used primarily for inheritance: methods and attributes on a function's prototype property are available to instances of that function. 

The prototype can be considered the "original" object, from which instances inherit properties.
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        
### Extending the Prototype with new methods

```javascript
    // Constructor function that creates the prototype
    function PetProduct() {
        this.inventory = 100;
    }

    // Extend the prototype to define methods for new PetProducts
    PetProduct.prototype.buy = function(quantity) {
        this.inventory = this.inventory - quantity;
    }

    // Instantiate a new PetProduct
    var kittenProduct = new PetProduct();

    // kittenProduct can access methods defined in the prototype
    console.log(kittenProduct.inventory);    // 100
    kittenProduct.buy(20);
    console.log(kittenProduct.inventory);    // 80
```
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        #### Exercise 1
                        ### Creating objects

1. Create a new script for the next set of exercises called `oo.js`.
1. Add it to your `index.html` file.

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        #### Exercise 1
                        ### Creating objects

Copy the JS from this [CodePen template](http://codepen.io/cfarm/pen/grxYqv?editors=0010) into `oo.js`. It does the following:

1. Adds arguments for name, category, and price
1. Adds properties for name, category, and price
1. Creates a method on the Product object called addToCart(). When that method is called, it uses console.log to output a string like "You added Kitten Mittens to your cart."
1. Instantiates a new Product object and calls the addToCart() method on it.
1. Instantiates a second new Product object with different constructor arguments.


                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        #### Exercise 1
                        ### Let's Develop It!
                        
                        1. Make the addToCart() method print your message to the HTML on the page using [jQuery DOM manipulation](http://api.jquery.com/category/manipulation/) or [JavaScript's document.write() method](https://developer.mozilla.org/en-US/docs/Web/API/Document/write).
                        1. Make the addToCart() method accept a quantity to add to the shopping cart, and call it with different amounts.
                    

[View the solution](http://codepen.io/cfarm/pen/BKdBMV?editors=0010)

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ### Prototype from a prototype

```javascript
// The constructor function
function PetClothing(name, category, price, size) {
    PetProduct.call(this, name, category, price); // inherit properties from PetProduct constructor
    this.size = size;
}
// Extending the PetProduct object
PetClothing.prototype = Object.create(PetProduct.prototype);

// Instantiate a new PetClothing object
var doggySweater = new PetClothing('Doggy sweater', 'dog clothings', 30, 'medium');
```

Because it inherits from PetProduct, PetClothing has the properties and methods available to PetProduct as well.

[Read explanation of JavaScript prototype chain](http://wildlyinaccurate.com/understanding-javascript-inheritance-and-the-prototype-chain/)
                    </script>

                </section>

                <section data-markdown>
                    <script type="text/template">
                        #### Exercise 2
                        ### Extending the prototype

Beginning with your `oo.js` code from Exercise 1, (or this [Codepen template](http://codepen.io/cfarm/pen/jqGdxZ?editors=0010)), make the following changes:

1. Create a new object called `PetProduct` that extends `Product`. Its constructor should also take in an `inventory` argument.
2. Instantiate a new `PetProduct` object and call the `addToCart()` method on it.
3. Add a method to `PetProduct` called `addToWishlist()` that uses `console.log` to output a string like "You added Umbrella Hat for Cats to your Wishlist!"
                        
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        #### Exercise 2: Bonus
                        ## Extending the prototype
                        
                        1. Bonus: Use an array of data and a for loop to instantiate 5 `PetProduct` objects.
                        1. Bonus: Make an array of product data with cat products and dog products, loop through them, and decide on each one which `category` property it will have.
                    

[View the solution](http://codepen.io/cfarm/pen/oxGWwv?editors=0011)
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## Building HTML with OOJS

You can create objects that know how to interact with your website.

```javascript
PetProduct.prototype.displayOnWebsite = function() {
    var $productInfo = $('<p></p>');
    $productInfo.text('You are buying a ' + this.name);

    var $list = $('#product-list');
    $list.append($productInfo);
};
```
                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    #### Exercise 3, part 1
                    ##  Building HTML with OOJS

                    Starting with this [Codepen template](http://codepen.io/cfarm/pen/KzXJBR?editors=0010) or your code from the previous exercise:

                    1. Update the `addToCart` function to display your message on the website using the jQuery `text()` and `append()` methods
                    1. Update the `addToWishlist` function to display your message using the jQuery `html()` method inside of a div with the class "wishlist"

                    Hint: see [jQuery's documentation](http://api.jquery.com/category/manipulation/) for examples of DOM manipulation


                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    #### Exercise 3, part 2
                    ##  Building HTML with OOJS

                    1. Make an array of pet data with pet products, loop through them, and create a new `PetProduct` object for each, assigning them to the `dog` or `cat` category.
                    1. Use jQuery to display the products for each category in separate lists on the page: a list of `dog` products and a list of `cat` products

                    Hint: see [jQuery's documentation](http://api.jquery.com/category/manipulation/) for examples of DOM manipulation
                        
                    [View Solution](http://codepen.io/cfarm/pen/KzXmJx?editors=0010)

                    </script>
                </section>

                <section>

                       <h2>Learn more OOJS</h2>

                        <p><a href="https://kpcs.github.io/Intro_OOJS/">Intro to Object-Oriented JS slides from Tracy Russell</a></p>

                        <p>Look out for this class in the future on Meetup</p>

                </section>
                

                <section id="forms" data-markdown>
                    <script type="text/template">
                        ## Forms

You can collect information from users to use in our Object-Oriented JavaScript with HTML forms.

```html
<form class="buy" id="catnip">
    <h3>Catnip for sale</h3>
    <label for="quantity">Quantity:</label>
    <input type="number" id="quantity" name="quantity" value="1">
    <button class="button" id="buy-catnip">Buy catnip!</button>
</form>
```

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    ## Retrieving form data

                    You retrieve the values of form elements using the value property.

```javascript
var quantity = document.getElementById('quantity').value;
console.log (quantity);
```

Or do it with [jQuery](http://api.jquery.com/category/forms/): 
```javascript
var $quantity = $('#quantity').val();
console.log ($quantity);
```

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    ## Events

You can retrieve the value of a form at any time, like `onblur` (when a form element loses focus) or `onsubmit` (when the form element is submitted). `preventDefault` lets us hijack the form's default behavior so we can do stuff with JavaScript instead.

```javascript
var submitButton = document.getElementById('buy-catnip');
submitButton.onclick = function (event) {
    event.preventDefault();
    var quantity = document.getElementById('quantity').value;
    console.log (quantity);
}
```

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                    ## Events using jQuery

Here's the same script with jQuery syntax:

```javascript
var $submitButton = $('#buy-catnip');
$submitButton.click( function(event) {
    event.preventDefault();
    var $quantity = $('#quantity').val();
    console.log ($quantity);
});
```

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        #### Exercise 4

                        ## Add to cart form

Use [this CodePen template](http://codepen.io/cfarm/pen/dMVroX?editors=0010). Write your program with [vanilla JS](http://vanilla-js.com/) or [jQuery](http://api.jquery.com/category/forms/), your choice.

1. Add new products to the page using the PetProduct constructor function and `displayOnWebsite` method.
2. Using a `submit` event, make the `addToCart()` function display the product name and price on the page. 
2. Using an `onblur` event, create a new method on the `PetProduct` prototype that displays the quantity the user has chosen inside the buy button. For example, the button would say "Buy 4 Catnips!"

Hint: Review <a href="http://cfarm.github.io/gdi-intro-js/class4.html#/10">the submit event</a> for documentation and examples

[View solution](http://codepen.io/cfarm/pen/vGemXO)
                    </script>
                </section>

                <section id="form-validation" data-markdown>
                    <script type="text/template">
                        ## Form Validation

                        Often we want to check that users have input the correct types of data into our forms, or the required fields, before we save the data to a database or complete a transaction.

                        <img src="dist/img/email-validation.png" alt="Example of form validation on an email input field" />

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
                        ## HTML5 Form Validation

                        With HTML5, we can have the browser perform the validation for us with some simple markup:

```html                        
<form id="email-signup">
    <h3>Join the Kitten Party Club to find out about new kitten cams!</h3>
    <label for="email">Your email:</label>
    <input type="text" id="email" name="email" required>
  <button type="submit" class="button" id="email-submit">Join</button>
</form>
```

                    </script>
                </section>

                <section data-markdown>
                    <script type="text/template">
## HTML5 Input types

Besides the `required` attribute, we can also specify specific types of data our form inputs will accept as valid:

```html
<label for="email">Your email:</label>
<input type="email" id="email" name="email" required> <!-- now validates for an email address -->
```

                    </script>
                </section>

<section data-markdown>
<script type="text/template">
## HTML5 Pattern attribute

Validates the field against a Regular Expression pattern:

```html
<label for="email">Your email:</label>
<input type="email" id="email" name="email" required pattern="/@/"> <!-- now validates for an email address that contains an @ symbol -->
```

Check out [Stop Validating Email Addresses With Regex](https://davidcel.is/posts/stop-validating-email-addresses-with-regex/) for why to use such a simple pattern.
</script>
</section>

<section data-markdown>
<script type="text/template">
## Min, max, and step

The pattern attribute is included here as an optional fallback for browsers which don't support the number field.

```html
<input type="number" min="12" max="120" step="1" id="age" name="age" pattern="\d+">
```
</script>
</section>

<section data-markdown>
<script type="text/template">
## Maxlength

For text fields (`<input>` and `<textarea>`):

```html
<label for="tweet-text">Tweet a thing</label>
<textarea id="tweet-text" name="tweet-text" maxlength="140" rows="5">
</textarea>
```
</script>
</section>

<section data-markdown>
<script type="text/template">
#### Exercise 5

## Validate our form inputs

Using your Add to Cart form from Exercise 4 or [this CodePen template](http://codepen.io/cfarm/pen/vGemXO), add HTML5 validate attributes that: 

1. Make the quantity field required.
1. Make the quantity accept only whole numbers between 1 and 100.
1. Bonus: Make the quantity maximum the value of the `inventory` property on one of your `PetProduct` instances.
</script>
</section>

<section data-markdown>
<script type="text/template">
## Where's the JS?

You might need JavaScript form validation if...

* You need to support IE8 & IE9 (see [HTML5 form validation browser support](http://caniuse.com/#feat=form-validation))
* You want to customize your error message copy
* You want to style your error messages with CSS
</script>
</section>

<section data-markdown>
<script type="text/template">
## novalidate attribute

To use JavaScript validation, we want to disable the browser's default validation errors:

```html
<form id="email-signup" novalidate>
  <h3>Join the Kitten Party Club to find out about new kitten cams!</h3>
  <label for="email">Your email:</label>
  <input type="email" id="email" name="email" required>
  <button type="submit" class="button" id="email-submit">Join</button>
</form>
```
</script>
</section>

<section data-markdown>
<script type="text/template">
## DOM Manipulation

Remember [DOM manipulation](http://cfarm.github.io/gdi-intro-js/class3.html#/14)?

1. Find the DOM node and store it in a variable
1. Use methods to manipulate the node

```javascript
var emailForm = document.getElementById('email-signup');
var emailInput = document.getElementById('email');
var emailSubmitButton = document.getElementById('email-submit');
```
</script>
</section>

<section data-markdown>
<script type="text/template">
## Create new DOM elements

```javascript
document.createElement(tagName);
document.createTextNode(text);
document.appendChild();
```

</script>
</section>

<section data-markdown>
<script type="text/template">
## Create an error message

```javascript
var errorEl = document.createElement('span');
var errorText = document.createTextNode('Please enter a valid email address, thank you muchly');
errorEl.appendChild(errorText);
errorEl.className = 'error'; // adds error class 
emailForm.insertBefore(errorEl, emailInput); // inserts element into DOM with insertBefore() method
```
[Live Example](http://codepen.io/cfarm/pen/QNqxgq?editors=1010)

</script>
</section>

<section data-markdown>
<script type="text/template">
## Add an event listener

Versus `onsubmit()`: allows multiple event handlers for a single event type, without risk of [overwriting others](http://codepen.io/cfarm/pen/PNJyoP?editors=1010).

`addEventListener()` method takes two arguments: event type, and a callback function that receives notification when the specified event occurs.

```javascript
emailForm.addEventListener('submit', function() { 
    // do something when form is submitted
});
```
</script>
</section>

<section data-markdown>
<script type="text/template">
## Constraint Validation API

[HTML5 constraint validation API](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms/Data_form_validation#The_HTML5_constraint_validation_API)

```javascript
emailForm.addEventListener('submit', function(event) { 
    var emailInputValue = emailInput.value;
    if (emailInput.validity.valid) {
        // yay it's valid, no error needed.
    } else {
        event.preventDefault();  
        emailForm.insertBefore(errorEl, emailInput); // insert our error when invalid on submit
    }
});
```
</script>
</section>

<section data-markdown>
<script type="text/template">
#### Exercise 6
## Custom validation error

Using this [Add to Cart form JS and HTML](https://codepen.io/cfarm/pen/mBzqKZ) from Codepen:

1. Edit your form so that the browser will not validate with HTML5.
1. Add vanilla JavaScript or jQuery to create a custom error message HTML element that says something like "quantity must be between 1 and 100"
1. Add an event listener to your JS that displays your custom error message when the submit button is clicked
1. Add CSS to style your message however you like.

</script>
</section>

<section data-markdown>
<script type="text/template">
#### Exercise 6: Bonus
## Custom validation error

1. Bonus: remove the error message when the form input is corrected and valid.
1. Bonus: make your JavaScript validity conditional remove the error message when the input is corrected and valid.

[View solution]()
</script>
</section>

<section data-markdown>
<script type="text/template">
## jQuery Validation

The [jQuery Validation plugin](http://jqueryvalidation.org/documentation/) is a great library for cross-browser support and simplified syntax.

```javascript
$( "#credit-card-form" ).validate({
  rules: {
    field: {
      required: true,
      creditcard: true
    }
  }
});
```

</script>
</section>

<!-- <section id="modules" data-markdown>
<script type="text/template">
## Code organization with modules

You have some JavaScript...

It's getting pretty long! If we want to find and update the displayOnWebsite() method then we're scrolling through lots of other code to do so. 

</script>
</section>

<section data-markdown>
<script type="text/template">
If we could split this file up by feature it'd be a lot easier to update and maintain:

* `product.js`
* `petProduct.js`
* `catFood.js`
* `doggySweater.js`

</script>
</section>

<section>
but then we'd have to load 3 separate files in our index.html:

<pre><code contenteditable class="html"><script src="product.js"></script>
<script src="petProduct.js"></script>
<script src="catFood.js"></script>
<script src="doggySweater.js"></script>
</code></pre>

</section>

<section data-markdown>
<script type="text/template">
What's wrong with this? 

<ul>
<li class="fragment">performance</li>
<li class="fragment">maintenance</li>
<li class="fragment">dependencies</li>
</ul>

</script>
</section>

<section data-markdown>
<script type="text/template">
### Code organization wishlist:

* load one JS file for performance purposes
* multiple module files for development purposes
* able to load modules as needed for when code is dependent on another file
</script>
</section>

<section data-markdown>
<script type="text/template">
## JavaScript Modules
Unlike other programming languages JavaScipt did not let you separate files and import them into other JS files natively - until ES6/ES2015. 

Browsers don't yet support native JS modules.
</script>
</section>

<section data-markdown>
<script type="text/template">
## CommonJS and Node

CommonJS is a module format that lets you export and import code between separate files. 

A build process is then used - for example Gulp, Grunt, webpack - to combine the JavaScript into one file that executes code in the correct order.

</script>
</section>

<section data-markdown>
<script type="text/template">
#### 2 steps to write modules in CommonJS format:

1. Make functions available to other modules with `module.exports`
1. Require dependencies when you want to reuse code.


```javascript
function helloWorld() {
    alert('Hello, world.')
}

module.exports = {
    hello: helloWorld
}
```

```javascript
var helloWorld = require('./helloWorld.js');

helloWorld.hello();
```

</script>
</section> -->

<!-- <section data-markdown>
<script type="text/template">
#### Group Exercise
### Organize some OOJS code

1. Check out the code inside the `class2/js/` folder:

<img src="dist/img/js-folder-modules.png" alt="">

1. Update the module.exports object in each module to export its functions.
1. Import your dependencies into app.js using the `require` statement.

</script>
</section> -->

<!-- <section data-markdown>
<script type="text/template">
### More about modules

[Require.js](http://requirejs.org/) uses the [AMD module](http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition) format and does not need a build step, as it runs solely in the browser.
</script>
</section> -->

<!-- <section data-markdown> -->
                    <!-- <script type="text/template">
                    ## More about ES6
                    
                    <p class="left-align">What we've learned from ES6: </p>
                    

                    - Promises
                    - Modules 

                    Other new features to look into:

                    - Classes (clearer object-oriented syntax for prototypes)
                    - Arrow functions
                    - Declaring variables with `const` and `let`

                    </script>
                </section> -->

<section id="tdd" data-markdown>
<script type="text/template">

## Test-Driven Development

A way of writing code where you think about the behavior of the user, the interactions they will make, and the outcome that should occur based on their actions.


</script>
</section>

<!-- <section id="setup" data-markdown>
<script type="text/template">
### Setup exercise files

[Download and unzip class2 files](exercises/class2.zip)

1. [Install Node.js](https://nodejs.org/en/)
1. Open terminal/command prompt and navigate to the class2-exercises folder: `cd ~/Downloads/class2/class2-exercises/`
1. Run `npm install`
1. Run `npm run build`
1. Run server: `python -m SimpleHTTPServer 8080`
1. Go to [http://localhost:8080](http://localhost:8080) in browser

</script>
</section> -->

<section data-markdown>
<script type="text/template">

### Automated tests


Different kinds of automated tests in programming:

- <span class="blue">unit tests:</span> check logic at the function or module level
- <span class="blue">integration tests</span> test the functionality between parts of your application, like the UI and database
- <span class="blue">acceptance tests</span>, or browser tests, mimic the behavior of a user browsing a website

</script>
</section>

<section data-markdown>
<script type="text/template">

### How to write unit tests with TDD

*First*, write your test case that defines what will happen based on user behavior or interaction.

For example:

* "when I click the submit button, an alert function is triggered."
* "when I submit an invalid form value, an error message is added to the page."

</script>
</section>

<section data-markdown>
<script type="text/template">
### How to write unit tests

Second: write the function that makes the test pass.

Test: "when I click the submit button, an alert function is triggered."

Solution:

```javascript
button.onclick = function(event) {
    event.preventDefault();
    alert('hello again!');
}
```

</script>
</section>      

<section data-markdown>
<script type="text/template">

## JS Assessment

Setup [JS Assessment](https://github.com/rmurphey/js-assessment) locally:

1. [Download and unzip class2 files](exercises/class2.zip)
1. [Install Node.js](https://nodejs.org/en/)
1. In Terminal navigate to the folder: `cd ~/Downloads/class2/class2-exercises`
1. Run `npm install`
1. Run `npm run build`
1. Run `npm start` from here
1. Go to [http://localhost:4444](http://localhost:4444) in your browser
1. Open 'app' folder inside our class2 files in Sublime Text.

</script>
</section>      

<section data-markdown>
<script type="text/template">

#### Exercise 8
## JS Assessment

Write the following JS Assessment functions so that they pass their corresponding tests:

1. arrays.js
1. flowControl.js
1. objects.js
1. async.js
1. regex.js

</script>
</section>      

<section>
    <h2>Get involved</h2>
    <p><a href="http://www.meetup.com/Girl-Develop-It-Philadelphia/pages/Get_Involved/" target="_blank">TA, teach, mentor</a></p>
</section>
<section>
    <h2>Class Survey: How Are We Doing?</h2>
    <p><a href="http://bit.ly/gdi-intermediate-js-survey" target="_blank">http://bit.ly/gdi-intermediate-js-survey</a></p>
</section>
			</div>
  		<footer>
        <div>
            <a href="#/toc" style="display: block; position: absolute; bottom: 15px; left: 48%; font-size: 16px">Table of Contents</a>
        </div>
        <div class="copyright">
          Intermediate Javascript -- Girl Develop It Philadelphia
          <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/deed.en_US"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc/3.0/80x15.png" /></a>
        </div>
      </footer>
		</div>


		<script src="dist/js/head.min.js"></script>
		<script src="dist/js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
						Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true },
				]
			});

		</script>

	</body>
</html>